<hr>
<script src="/test_webapp/max-web-app.js"></script>
<script>
  window.onload = function() {
    initdata = window.WebApp.initData;
    document.getElementById("output").innerHTML = "<h2>initData:<br/>" + initdata + "</h2>";
    window.WebApp.DeviceStorage.setItem("test","kek");
    window.WebApp.DeviceStorage.getItem('test', (error, result) => {
      object = JSON.parse(result);
      key = object.test
    })
    document.getElementById("output2").innerHTML = "<h2>saved key:<br/>" + key + "</h2>";
  }
  
  /*
window.parent.postMessage(
  JSON.stringify({
      "type": "WebAppDeviceStorageSaveKey",
      "key": "test",
      "value": "test"
  }),
  "*"
);
window.addEventListener("message", (event) => {
  console.log("Полученные данные:", event.data);
  document.getElementById("output").innerHTML = "<h2>" + event.data + "</h2>";
});
*/
</script>

<p id="output" style="display:inline-block;"><h2>initData:<br/></h2></p>
<p id="output2" style="display:inline-block;"><h2>saved key:<br/></h2></p>
<a href="https://y4ppieflu.github.io/test_webapp/malicious.html">click me</a>
<script>
  /*
window.parent.postMessage(
  JSON.stringify({
      "type": "WebAppOpenLink",
      "url": "https://google.com/"
  }),
  "*"
);
window.addEventListener("message", (event2) => {
  console.log("Полученные данные:", event2.data);
  document.getElementById("output2").innerHTML = "<h2>" + event2.data + "</h2>";
});
*/
</script>
